---
layout:     post
title:      Shell踩坑
subtitle:   常用指令
date:       2019-01-25
author:     Jiayue Cai
header-img: img/post-bg-arch_linux2.png
catalog: true
tags:
    - Shell
---

> 随便整理的一些自己实际使用过程中的知识点

不定期整理更新...

### Linux/windows文件在换行符的区别

换行操作使用两个字符：一个字符`<Return>`来移到第一列，另一个字符`<Line feed>`来新增一行。

计算机产生以后，存储较为昂贵，在如何解决回车换行这个老问题上，人们产生了不同的意见：
- `UNIX`人认为在到达一行的结尾时新增一行<Line feed> (LF)
- `Mac`人则认同<Return> (CR)的解决办法
- `MS`人则坚持<Return><Line feed> (CRLF)的方法

将windows文件转换为unix：

	vi xx.txt
	ESC进入命令模式
	:set ff = unix
	:wq

尤其需要注意的是shell、python等脚本需要保存为unix格式，因为不然你在linux下直接运行时会提示：No such file or directory，因为Linux把换行符也当成脚本解释器的一部分了。

> [其他更详细的内容](https://www.cnblogs.com/ywl925/p/3915466.html)、
> [vim常用命令总结](https://www.cnblogs.com/yangjig/p/6014198.html)

### 文件访问

	cat input_file | head -n 1000    显示前面1000行 
	cat input_file | tail -n 1000    显示最后1000行
	cat input_file | tail -n +1000   从1000行开始显示，显示1000行以后的
	cat input_file | tail -n +1000   &#124; head -n 2000 从第1000行开始，显示2000行。即显示1000~2999行
	
	sed -n '5,10p' input_file        查看文件的第5行到第10行
	
	cat input_file | awk -F '\t' '{print $1}'   打印第一列
	
	touch xx 新建文件
	
	rz 上传文件
	sz 下载文件（大文件：sz -be）
		-b 以二进制方式传输（binary）
		-e 对控制字符转义（escape），这可以保证文件传输正确
	
awk的一般语法格式为：
- awk [-参数 变量] 'BEGIN{初始化}条件类型1{动作1}条件类型2{动作2}...END{后处理}'

> [awk其他更详细的内容](https://www.cnblogs.com/ywl925/p/3904436.html)、
> [shell语法](https://www.cnblogs.com/ywl925/p/3948310.html)

### 最常用快捷键

tab 命令补全/路径补全/文件名补全：

	一次tab是补全
	两次tab，列出相关信息

拷贝粘贴：

	左键选中（复制） 左右键同时点击（粘贴）
	alt+tab：切换当前的运行程序

命令行光标移动：

	ctrl+a	移动到命令行首
	ctrl+e	移动到命令行尾
	ctrl+u	从当前光标所在位置向前清除命令
	ctrl+c	中断操作

其他：

	新建终端窗口： crtl+shift+N
	终端的漂移/切换：shift+左右箭头
	挂 起：crtl+s
	解除挂起：crtl+q
	清 屏：crtl+l

### 权限操作

- Linux下文件的权限类型一般包括`读`，`写`，`执行`。对应字母为 r、w、x。
- Linux下权限的粒度有 `拥有者` 、`群组` 、`其它组` 三种。每个文件都可以针对三个粒度，设置不同的rwx(读写执行)权限 （即`-rwxrwxrwx`）。

> ps：第一位标识文件属性：d目录（即文件夹）、-文件、l链接文件、s该文件无论由什么用户启动，最众都会被超级用户去执行、b可供存储的接口设备、c串行端口设备如圆形插头的鼠标和键盘等等

- Linux上通常使用`chmod命令`对文件的权限进行设置和更改（例如`chmod 775 xx文件`、`chmod -R 774 xx文件夹`）。

> [Linux权限简述](https://blog.csdn.net/l0979365428/article/details/51558079)
> [Linux权限详解 命令之 chmod：修改权限](https://www.cnblogs.com/ywl925/p/3948310.html)

### 磁盘操作

df -h 查看内存：

	Filesystem    Size  Used Avail Use% Mounted on
	/dev/s1       441G  255G  186G  58% /home/ssd0
	/dev/s1       2.7T  1.9T  811G  71% /home/disk0
	
du -h --max-depth=1 当前目录中文件夹所含大小:

	102M    ./hadoop_output_history
	114M    ./hadoop_output_new

find . -size +1000M 列出当前目录下所有大于1000M的文件：

	./gs/data/ann_dict
	./gs/data/topic_dict


